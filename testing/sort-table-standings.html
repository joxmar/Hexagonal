<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>untitled</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
 <meta name="keywords" content="">
<!--[if lt IE 9]> <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

<link rel="stylesheet" href="../normalize.css">
</head>
<body onload="sortTable();">
	<table id="hexagonal-table">
		<thead>
			<th>Equipo</th>
			<th>PJ</th>
			<th>PG</th>
			<th>PE</th>
			<th>PP</th>
			<th>GF</th>
			<th>GC</th>
			<th>GD</th>
			<th>PTS</th>
		</thead>		
		<tbody></tbody>
	</table>
</body>
<script>
	// hexagonal array
	var hexagonal = [];

	// team builder object constructor
	function newTeam(name){
		this.name= name,
		this.pj= 0,
		this.pg= 0,
		this.pe= 0,
		this.pp= 0,
		this.gf= 0,
		this.gc= 0,
		this.gd= function(){
			return this.gf - this.gc;
		},
		this.pts= function(){
			return this.pg * 3 + this.pe;
		}
	}

	// build teams
	var uSa = new newTeam("United States");
	var panama = new newTeam("Panama");
	var honduras = new newTeam("Honduras");
	var costaRica = new newTeam("Costa Rica");
	var mexico = new newTeam("Mexico");
	var trinidad = new newTeam("Trinidad & Tobago");

	// include teams to the hexagonal array
	hexagonal.uSa = uSa;
	hexagonal.panama = panama;
	hexagonal.honduras = honduras;
	hexagonal.costaRica = costaRica;
	hexagonal.mexico = mexico;
	hexagonal.trinidad = trinidad;	

	// match day
	function matchday(teamA,teamAGoals,teamB,teamBGoals){
		var teamA = teamA;
		var teamAGoals = teamAGoals;
		var teamB = teamB; 
		var teamBGoals = teamBGoals;

		// update games played
		hexagonal[teamA]['pj'] ++;
		hexagonal[teamB]['pj'] ++;

		// add goals to each team
		hexagonal[teamA]['gf'] += teamAGoals;
		hexagonal[teamA]['gc'] += teamBGoals;
		hexagonal[teamB]['gf'] += teamBGoals;
		hexagonal[teamB]['gc'] += teamAGoals;

		// Alocate pg pe pp and points
		if (teamAGoals > teamBGoals) {			
			hexagonal[teamA]['pg'] += 1; // won
			hexagonal[teamB]['pp'] += 1; // lost
		}else if (teamAGoals < teamBGoals) {
			hexagonal[teamA]['pp'] += 1; // lost
			hexagonal[teamB]['pg'] += 1; // won
		}else{
			hexagonal[teamA]['pe'] += 1; // draw
			hexagonal[teamB]['pe'] += 1; // draw
		}
		// update table values
		sortTable();
	}

	// sort test
	function sortTable(){
		// Have to create and push elements from hexagonal array to new array (sortHex) in order to sort and display the correct table standing positions
		var sortHex = [];
		// get standings and push them to new array
		for (var teams in hexagonal) {		
			var teamName = hexagonal[teams].name;
			var teamGp = hexagonal[teams].pj;
			var teamGw = hexagonal[teams].pg;
			var teamGdr = hexagonal[teams].pe;
			var teamGl = hexagonal[teams].pp;
			var teamGf = hexagonal[teams].gf;
			var teamGa = hexagonal[teams].gc;
			var teamPts = hexagonal[teams].pts();		
			var teamGd = hexagonal[teams].gd();					
			sortHex.push({name: teamName, pj: teamGp, pg: teamGw, pe: teamGdr, pp: teamGl, gf: teamGf, gc: teamGa, pts: teamPts, gd: teamGd});			
		}	
		
		// sort array for correct standings positions
		sortHex.sort(function (a, b) {
		  if (a.pts < b.pts) {
		    return 1;	    
		  }
		  // if teams have equal points then sort by goal difference
		  if (a.pts === b.pts) { 
		    if (a.gd < b.gd) {
		    	return 1;
		  	}
		  }
		});
		
		// print sorted table
		var hexTable = document.getElementById('hexagonal-table');	
		// remove old standings
		var oldtbody = document.getElementsByTagName('tbody')[0];	
		oldtbody.parentNode.removeChild(oldtbody);

		// create and populate new standings
		var tbody = hexTable.appendChild(document.createElement('tbody'));	

		for (team in sortHex) {
			var teamRow = document.createElement('tr');
			teamRow.innerHTML = '<td>' + sortHex[team].name + '</td>' +
			'<td>' + sortHex[team].pj + '</td>' +
			'<td>' + sortHex[team].pg + '</td>' +
			'<td>' + sortHex[team].pe + '</td>' +
			'<td>' + sortHex[team].pp + '</td>' +
			'<td>' + sortHex[team].gf + '</td>' +
			'<td>' + sortHex[team].gc + '</td>' +
			'<td>' + sortHex[team].gd + '</td>' +
			'<td>' + sortHex[team].pts + '</td>';				
			tbody.appendChild(teamRow);
		}
	}

	// first round
	matchday('uSa',3,'mexico',1);
	matchday('honduras',2,'panama',0);
	matchday('trinidad',2,'costaRica',0);
	matchday('costaRica',1,'uSa',0);
	matchday('panama',0,'mexico',1);
	matchday('honduras',3,'trinidad',0);
	matchday('uSa',2,'honduras',2);
	matchday('trinidad',2,'panama',2);
	matchday('mexico',2,'costaRica',0);
	matchday('panama',2,'uSa',2);
	matchday('honduras',2,'costaRica',2);
	matchday('trinidad',0,'mexico',1);
</script>
</html> 